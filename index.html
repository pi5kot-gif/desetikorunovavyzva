<!doctype html>
<html lang="cs">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="format-detection" content="telephone=no" />
  <base href="./" />
  <title>Desetikorunová výzva 💛</title>

  <meta name="description" content="Desetikorunová výzva – 5 milionů lidí, každý pošle 10 Kč jako dobrovolný dar. Jednoduchý nápad, který může změnit svět.">
  <meta property="og:title" content="Desetikorunová výzva 💛" />
  <meta property="og:description" content="5 milionů lidí × 10 Kč = velká změna. Pošli dobrovolný dar na transparentní účet." />
  <meta property="og:image" content="assets/logo.webp" />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://www.desetikorunovavyzva.cz/" />

  <!-- ✅ Favicons -->
  <link rel="icon" href="assets/favicon.webp" type="image/webp" />
  <link rel="icon" href="assets/favicon.png" type="image/png" sizes="32x32" />
  <link rel="apple-touch-icon" href="assets/favicon.png" />
  <meta name="theme-color" content="#ffd600">

  <link rel="preload" href="style.css" as="style" onload="this.rel='stylesheet'">
  <noscript><link rel="stylesheet" href="style.css"></noscript>
</head>

<body>
  <!-- HEADER -->
  <header>
    <picture>
      <source srcset="assets/logo.webp" type="image/webp">
      <img src="assets/logo.png" alt="Logo 10 Kč – Desetikorunová výzva" class="logo" width="300" height="300" loading="lazy" />
    </picture>
    <h1>Desetikorunová výzva</h1>
    <p class="subtitle">Jeden malý dar. Obrovský dopad 💛</p>
  </header>

  <!-- MAIN -->
  <main>
    <!-- ÚVOD -->
    <section class="intro">
      <p>
        Každý den utratíme 10 Kč bez přemýšlení.  
        Ale co kdyby tentokrát těch deset korun změnilo něco skutečného?
      </p>

      <p>
        <strong>Desetikorunová výzva</strong> chce oslovit <strong>5 milionů lidí</strong>.  
        Když každý pošle jen deset korun, vznikne síla, která dokáže pomoct tam, kde je to opravdu potřeba.
      </p>

      <p>
        Každý dar bude veden na <strong>transparentním účtu Fio banky</strong>,  
        aby každý viděl, kam peníze jdou.  
        Tento projekt nepřijímá platby za služby ani produkty – jde výhradně o dobrovolné dary.
      </p>
    </section>

    <!-- QR SEKCE -->
    <section class="donate">
      <h2>Pošli dobrovolný dar 10 Kč</h2>
      <p class="donate-desc">
        Stačí naskenovat QR kód nebo odeslat dar ručně.<br>
        Každá částka pomáhá – děkujeme! 💛
      </p>

      <div class="qr-section">
        <picture>
          <source srcset="assets/qr.webp" type="image/webp">
          <img src="assets/qr_placeholder.png" alt="QR platba 10 Kč" class="qr" id="qrImage" width="250" height="250" loading="lazy" />
        </picture>
      </div>

      <div class="account">
        <p><strong>Název účtu:</strong> Desetikorunová výzva – M.P.</p>
        <p><strong>Číslo účtu:</strong> 2803344316/2010 (Fio banka)</p>
        <p><strong>Zpráva pro příjemce:</strong> Desetikorunová výzva</p>
      </div>

      <a href="https://ib.fio.cz/ib/transparent?a=2803344316" target="_blank" class="btn">
        Zobrazit transparentní účet
      </a>
    </section>

    <!-- KROKY -->
    <section class="steps">
      <h2>Jak to bude fungovat</h2>

      <div class="step">
        <button class="btn large" id="donateStep">
          <div class="icon">💛</div>
          <h3>1. Pošli dar 10 Kč</h3>
          <p>Klikni sem a otevři QR kód pro dar. Symbolický dar, který může změnit svět.</p>
        </button>
      </div>

      <div class="step">
        <button class="btn large" id="shareButton">
          <div class="icon">📣</div>
          <h3>2. Sdílej výzvu</h3>
          <p>Klikni kamkoliv sem a pošli dál odkaz na výzvu. Každé sdílení pomáhá 💛</p>
        </button>
      </div>

      <div class="step">
        <a href="dopad.html" class="btn large link">
          <div class="icon">🌍</div>
          <h3>3. Sleduj dopad</h3>
          <p>Jakmile výzva dosáhne svého cíle, zveřejníme přehled, kam peníze doputovaly.</p>
        </a>
      </div>
    </section>

    <!-- 🧮 PROGRESS SEKCE -->
    <section class="progress-section">
      <h2>💛 Výzva roste</h2>
      <p>Společně tvoříme sílu, která dokáže pomáhat.</p>

      <div class="progress-bar" style="width:100%;background:#fff;border-radius:10px;height:10px;overflow:hidden;">
        <div id="progress-fill" class="progress-fill" style="height:10px;background:#222;width:0%;transition:width 1s;"></div>
      </div>

      <p id="progress-text" class="progress-stats">Načítám data...</p>
    </section>
  </main>

  <!-- FOOTER -->
  <footer>
    <p>© 2025 Desetikorunová výzva – M.P.</p>
    <p class="legal">
      Desetikorunová výzva je dobrovolná iniciativa.<br>
      Nejedná se o veřejnou sbírku dle zákona č. 117/2001 Sb.<br>
      Veškeré příspěvky jsou zasílány dobrovolně na transparentní účet a jejich využití bude zveřejněno.
    </p>
  </footer>

  <!-- MODAL -->
  <div class="modal" id="qrModal">
    <div class="modal-content">
      <span class="close" id="closeModal">&times;</span>
      <h2>Naskenuj QR kód v mobilní aplikaci své banky</h2>
      <picture>
        <source srcset="assets/qr.webp" type="image/webp">
        <img src="assets/qr_placeholder.png" alt="QR kód pro dar 10 Kč" class="modal-qr" width="250" height="250" loading="lazy" />
      </picture>
      <p><strong>Číslo účtu:</strong> 2803344316/2010 (Fio banka)</p>
      <p><strong>Zpráva pro příjemce:</strong> Desetikorunová výzva</p>
    </div>
  </div>

  <script src="script.js"></script>

  <!-- 📊 SCRIPT pro načtení dat z Fio API -->
  <script>
  async function updateProgress() {
    const CIL = 50000000; // 50 milionů Kč
    const API = "https://web-production-bc62e.up.railway.app/fio";

    try {
      const res = await fetch(API);
      const data = await res.json();
      const balance = parseFloat(data.balance || 0);
      const percent = Math.min(((balance / CIL) * 100).toFixed(2), 100);

      document.getElementById("progress-text").innerHTML =
        `Vybráno: <strong>${balance.toLocaleString("cs-CZ")} Kč</strong> z <strong>${CIL.toLocaleString("cs-CZ")} Kč</strong> (${percent} %)`;
      document.getElementById("progress-fill").style.width = percent + "%";
    } catch (e) {
      console.error("Nepodařilo se načíst data z Fio API:", e);
      document.getElementById("progress-text").textContent = "Nelze načíst stav účtu 😔";
    }
  }

  // 🔁 automatické aktualizace každých 60 sekund
  updateProgress();
  setInterval(updateProgress, 60000);
  </script>
</body>
</html>
